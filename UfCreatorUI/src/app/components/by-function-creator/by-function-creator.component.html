<ng-container [ngSwitch]="stepperOrientation | async">
  <div *ngSwitchCase="'horizontal'"></div>
  <div *ngSwitchCase="'vertical'"></div>
</ng-container>

<mat-stepper
  [orientation]="(stepperOrientation | async)!"
  class="example-stepper" #stepper>
  <mat-step [stepControl]="firstFormGroup" label="Choose camel model" >

    <form [formGroup]="firstFormGroup">
      <mat-form-field appearance="fill">
        <mat-label>Select camel model</mat-label>
        <mat-select #firstStep
                    required >
          <mat-option #first *ngFor="let camelModel of camelModelList" [value]="camelModel" (onSelectionChange)="firstStepComplete(first.value)">{{camelModel}}</mat-option>
        </mat-select>
      </mat-form-field>

      <div *ngIf="isVariablesLoading else elseBlockVariables"
           style="display: flex; justify-content: left; align-items: center;">
        <mat-label>Variables</mat-label>
        <mat-progress-spinner
          color="accent"
          mode="indeterminate"
        diameter="50">
        </mat-progress-spinner>
      </div>

      <div *ngIf="isCompositeMetricsLoading else elseBlockCompositeMetrics"
           style="display: flex; justify-content: left; align-items: center;">
        <mat-label>Composite Metrics</mat-label>
        <mat-progress-spinner
          color="accent"
          mode="indeterminate"
          diameter="50">
        </mat-progress-spinner>
      </div>

      <div *ngIf="isRawMetricsLoading else elseBlockRawMetrics"
           style="display: flex; justify-content: left; align-items: center;">
        <mat-label>Raw Metrics</mat-label>
        <mat-progress-spinner
          color="accent"
          mode="indeterminate"
          diameter="50">
        </mat-progress-spinner>
      </div>
      <ng-template #elseBlockVariables>
        <mat-list>
          <mat-label>Variables</mat-label>
          <mat-list-item *ngFor="let variable of variableList" >{{variable.name}}</mat-list-item>
        </mat-list>
      </ng-template>
      <ng-template #elseBlockCompositeMetrics>
        <mat-list>
          <mat-label>Raw Metrics</mat-label>
          <mat-list-item *ngFor="let rawMetric of rawMetricList" >{{rawMetric.name}}</mat-list-item>
        </mat-list>
      </ng-template>
      <ng-template #elseBlockRawMetrics>
        <mat-list>
          <mat-label>Composite Metrics</mat-label>
          <mat-list-item *ngFor="let compositeMetric of compositeMetricList">{{compositeMetric.name}}</mat-list-item>
        </mat-list>
      </ng-template>
      <div>
        <button color="primary" mat-button matStepperNext>Next</button>
      </div>
    </form>
  </mat-step>

  <mat-step [stepControl]="thirdFormGroup" label="Choose function">
    <form [formGroup]="thirdFormGroup">
      <label id="example-radio-group-label">Pick function:</label>
      <mat-selection-list #predefinedFunctionSelectionList>
        <mat-list-option *ngFor="let predefinedFunction of predefinedFunctions" [value]="predefinedFunction">
          <p>
            <mat-label> {{predefinedFunction.name}}</mat-label>
<!--            <tr>-->
<!--              <img src="{{predefinedFunction.src}}">-->
<!--            </tr>-->
          </p>
        </mat-list-option>
      </mat-selection-list>

      <p>
        Options selected: {{predefinedFunctionSelectionList.selectedOptions.selected.length}}
      </p>
      <div>
        <button color="primary" mat-button (click)="openDialog(predefinedFunctionSelectionList.selectedOptions.selected,stepper)">Next</button>
      </div>
    </form>
  </mat-step>
  <mat-step [stepControl]="forthFormGroup" label="Define weights">
    <form [formGroup]="forthFormGroup">
      <p>
        <mat-form-field appearance="fill">
          <input formControlName="forthCtrl" matInput placeholder="Finish simulation on time" required>
        </mat-form-field>
      </p>
      <p>
        <mat-form-field appearance="fill">
          <input formControlName="forthCtrl" matInput placeholder="Expected response time " required>
        </mat-form-field>
      </p>
      <p>
        <mat-form-field appearance="fill">
          <input formControlName="forthCtrl" matInput placeholder="Cost per user" required>
        </mat-form-field>
      </p>
      <p>
        <mat-form-field appearance="fill">
          <input formControlName="forthCtrl" matInput placeholder="Cores cost utility" required>
        </mat-form-field>
      </p>
      <p>
        <mat-form-field appearance="fill">
          <input formControlName="forthCtrl" matInput placeholder="CPU usage" required>
        </mat-form-field>
      </p>
      <p>
        <mat-form-field appearance="fill">
          <input formControlName="forthCtrl" matInput placeholder="RAM usage" required>
        </mat-form-field>
      </p>
      <div>
        <button mat-button matStepperPrevious>Back</button>
        <button color="primary" mat-button matStepperNext>Next</button>
      </div>
    </form>
  </mat-step>
  <mat-step>
    <pre>{{selected | json}}</pre>
    <ng-template matStepLabel>Done</ng-template>
    <p>You Created Function:</p>
    <div>
      <button color="secondary" mat-button matStepperPrevious>Back</button>
      <button color="primary" mat-button matStepperPrevious>Save to Camel Model</button>
    </div>
  </mat-step>
</mat-stepper>
